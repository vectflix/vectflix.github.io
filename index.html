<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vectflix</title>
<style>
body, html {margin:0; padding:0; font-family:Arial,sans-serif; background:#000; color:#fff;}

/* Welcome Screen */
#welcome {
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:10;
    background:#000;
}
#welcome iframe {
    width:100%;
    height:100%;
    position:absolute;
    top:0;left:0;
    border:0;
}
#welcome h1 {
    position:relative;
    z-index:11;
    font-size:48px;
    color:#e50914;
    text-align:center;
    text-shadow:0 0 10px #000;
}

/* Header */
header {
    position:sticky;
    top:0;
    background:#141414;
    padding:15px 20px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    z-index:5;
}
#logo {
    color:#e50914;
    margin:0;
    font-size:26px;
    cursor:pointer;
    text-decoration:none;
}
#logo span {
    text-decoration:none;
}
#search {
    padding:6px 10px;
    border-radius:4px;
    border:none;
    width:200px;
}

/* Tabs */
.tabs {
    display:flex;
    flex-wrap:wrap;
    background:#111;
    padding:10px 20px;
}
.tab {
    margin-right:15px;
    margin-bottom:8px;
    padding:6px 12px;
    cursor:pointer;
    background:#222;
    border-radius:4px;
    font-size:14px;
}
.tab.active {background:#e50914;}

/* Trailers grid */
.trailers {
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(180px,1fr));
    gap:15px;
    padding:20px;
}
.card {
    background:#111;
    border-radius:6px;
    cursor:pointer;
    overflow:hidden;
    text-align:center;
    transition:transform .2s, box-shadow .2s;
}
.card:hover {
    transform:scale(1.03);
    box-shadow:0 0 15px rgba(0,0,0,0.7);
}
.card img {
    width:100%;
    height:260px;
    object-fit:cover;
}
.card p {
    padding:8px;
    font-size:14px;
}

/* Footer */
footer {
    background:#141414;
    padding:10px 20px;
    text-align:center;
    font-size:13px;
    color:#aaa;
}
footer a {
    color:#e50914;
    text-decoration:none;
}
footer a:hover {
    text-decoration:underline;
}
</style>
</head>
<body>

<!-- Welcome Screen -->
<div id="welcome">
    <iframe
        src="https://www.youtube.com/embed/vhFPHYgILN0?autoplay=1&mute=1&controls=0&modestbranding=1&playsinline=1&loop=1&playlist=vhFPHYgILN0"
        allow="autoplay; encrypted-media"
        allowfullscreen>
    </iframe>
    <h1>Welcome to Vectflix</h1>
</div>

<header>
    <!-- Clickable “logo” like Netflix -->
    <a id="logo"><span>Vectflix</span></a>
    <input type="text" id="search" placeholder="Search trailers...">
</header>

<div class="tabs" id="tabs"></div>
<div id="trailers" class="trailers"></div>

<footer>
    Follow me on Instagram:
    <a href="https://www.instagram.com/vecteezy_1" target="_blank">@vecteezy_1</a>
</footer>

<script>
let trailersData = [];
let categories = ["All"];

async function loadTrailers() {
    try {
        const response = await fetch("trailers.json");
        const data = await response.json();
        trailersData = data.categories || [];
        trailersData.forEach(c => {
            if (c && c.name && !categories.includes(c.name)) {
                categories.push(c.name);
            }
        });
        displayTabs();
        displayTrailers("All");
    } catch(e) {
        console.error(e);
        document.getElementById("trailers").innerHTML =
          "<p style='color:red;text-align:center;'>Failed to load trailers.json</p>";
    }
}

function displayTabs() {
    const tabsContainer = document.getElementById("tabs");
    tabsContainer.innerHTML = '';
    categories.forEach((cat,i)=>{
        const tab = document.createElement('div');
        tab.className = 'tab' + (i===0 ? ' active' : '');
        tab.innerText = cat;
        tab.onclick = () => {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            displayTrailers(cat);
        };
        tabsContainer.appendChild(tab);
    });
}

function displayTrailers(categoryName) {
    const container = document.getElementById("trailers");
    container.innerHTML = '';
    let list = [];

    if (categoryName === "All") {
        trailersData.forEach(c => {
            if (c && Array.isArray(c.trailers)) list.push(...c.trailers);
        });
    } else {
        const cat = trailersData.find(c => c.name === categoryName);
        if (cat && Array.isArray(cat.trailers)) list = cat.trailers;
    }

    list.forEach(trailer => {
        if (!trailer || !trailer.thumbnail || !trailer.url) return;
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${trailer.thumbnail}" alt="${trailer.title || ''}">
            <p>${trailer.title || ''}</p>
        `;
        card.onclick = () => window.open(trailer.url, "_blank");
        container.appendChild(card);
    });
}

// Search
document.getElementById('search').addEventListener('input', (e)=>{
    const query = e.target.value.toLowerCase();
    let filtered = [];
    trailersData.forEach(cat => {
        if (!cat || !Array.isArray(cat.trailers)) return;
        filtered.push(...cat.trailers.filter(
            t => t.title && t.title.toLowerCase().includes(query)
        ));
    });

    const container = document.getElementById("trailers");
    container.innerHTML = '';
    filtered.forEach(trailer => {
        if (!trailer || !trailer.thumbnail || !trailer.url) return;
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <img src="${trailer.thumbnail}" alt="${trailer.title || ''}">
            <p>${trailer.title || ''}</p>
        `;
        card.onclick = () => window.open(trailer.url, "_blank");
        container.appendChild(card);
    });
});

// Hide welcome after 5 seconds
setTimeout(()=>{
    const w = document.getElementById("welcome");
    if (w) w.style.display="none";
},5000);

// Make Vectflix logo act like Netflix home button
document.getElementById('logo').addEventListener('click', () => {
    // Clear search
    const search = document.getElementById('search');
    search.value = '';

    // Activate "All" tab
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(t => t.classList.remove('active'));
    const allTab = Array.from(tabs).find(t => t.innerText === 'All');
    if (allTab) allTab.classList.add('active');

    // Show all trailers again
    displayTrailers("All");
});

loadTrailers();
</script>
</body>
</html>
